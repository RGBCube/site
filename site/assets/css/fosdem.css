@import "tailwindcss";

@theme {
  --color-surface: #0f1115;
  --color-surface-alt: #16181d;
  --color-border: #2a2d35;
  --color-border-dim: #22252b;
  --color-border-faint: #1a1d23;
  --color-text: #cdd3de;
  --color-text-bright: #e2e6ed;
  --color-text-muted: #6b7280;
  --color-accent: #7eb8ff;
}

/* JS-toggled state classes */
.dimmed {
  @apply opacity-[0.1] pointer-events-none;
}

.highlight {
  @apply brightness-[1.35] z-[3] -translate-y-[0.0625rem]
    shadow-[0.25rem_1rem_rgba(0,0,0,.5)];
}

.inactive {
  @apply opacity-[0.35];
}

/* Event card */
.ev {
  @apply absolute left-[0.1875rem] right-[0.1875rem] rounded outline outline-1
    outline-current border-l-[0.1875rem] border-current px-1.5 pt-1
    overflow-hidden cursor-pointer flex flex-col gap-[0.0625rem] no-underline
    max-h-[var(--h)];

  @apply [transition:filter_150ms,transform_150ms,box-shadow_150ms];

  &:hover {
    @apply !z-50 brightness-[1.35] -translate-y-[0.0625rem]
      shadow-[0.25rem_1rem_rgba(0,0,0,0.5)] overflow-visible
      max-h-[calc(var(--h)+10rem)]
      [transition:filter_150ms,transform_150ms,box-shadow_150ms,max-height_300ms];
  }
}

.ev-fav {
  @apply absolute top-0.5 right-0.5 appearance-none w-3.5 h-3.5
    rounded-[calc(0.25rem-0.125rem)] border border-current opacity-30
    cursor-pointer z-10 shrink-0 [transition:opacity_150ms,background_150ms];

  &:hover {
    @apply opacity-60;
  }

  &:checked {
    @apply opacity-90 bg-current bg-contain;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M4 8l3 3 5-6' stroke='%23000' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  }
}

.ev-time {
  @apply text-[0.58rem] opacity-70 font-semibold;
}

.ev-title {
  @apply text-[0.68rem] font-semibold leading-tight overflow-hidden text-inherit
    [-webkit-box-orient:vertical] [display:-webkit-box];

  .group:hover & {
    @apply block overflow-visible [-webkit-line-clamp:unset] bg-inherit
      pb-[0.3rem];
  }
}

/* Buttons */
.fbtn {
  @apply rounded px-2 py-0.5 text-[0.68rem] cursor-pointer transition-all
    duration-150;

  &:hover {
    @apply brightness-[1.35] -translate-y-[0.0625rem]
      shadow-[0.25rem_1rem_rgba(0,0,0,0.5)];
  }
}

.ctrl-btn {
  @apply bg-[#1e2028] text-accent border border-border font-semibold;
}

.track-btn {
  @apply inline-flex items-center border border-current;
}

.track-fav-count {
  @apply inline-flex items-center justify-center self-stretch
    px-0.5 -mr-[calc(0.5rem-0.125rem)]
    ml-1 rounded-[calc(0.25rem-0.125rem)] text-[0.85em]
    leading-none font-bold bg-current;

  & > span {
    @apply invert grayscale contrast-[9];
  }
}

/* Grid */
.room-col {
  @apply min-w-[11.25rem] w-[11.25rem] border-r border-border-faint shrink-0;
}

.room-hdr {
  @apply bg-surface-alt px-1.5 py-1 text-[0.72rem] font-semibold
    text-text-bright border-b border-border whitespace-nowrap overflow-hidden
    text-ellipsis;
}

.hour-rule {
  @apply absolute left-0 right-0 h-px bg-border-faint;
}

.half-rule {
  @apply absolute left-0 right-0 h-px
    bg-[repeating-linear-gradient(90deg,var(--color-border-faint)_0_4px,transparent_4px_8px)];
}

.quarter-rule {
  @apply absolute left-0 right-0 h-px
    bg-[repeating-linear-gradient(90deg,var(--color-border-faint)_0_2px,transparent_2px_6px)];
}

.hour-label {
  @apply absolute right-1.5 text-[0.65rem] text-text-muted -translate-y-1/2
    whitespace-nowrap;
}

.now-line {
  @apply absolute left-0 right-0 h-px bg-red-500 z-[100] pointer-events-none;
}
